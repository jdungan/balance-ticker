var ExtMath, Summary, all_states, build, height, line, parseDate, sparkline, width, x, y, _sum,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

ExtMath = (function(_super) {
  __extends(ExtMath, _super);

  function ExtMath() {
    return ExtMath.__super__.constructor.apply(this, arguments);
  }

  ExtMath.truncate = function(x, precision) {
    var scale, scales;
    if (precision == null) {
      precision = 0;
    }
    scales = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000];
    scale = scales[precision];
    return Math.round(x * scale) / scale;
  };

  return ExtMath;

})(Math);

_sum = function(memo, num) {
  return memo + num;
};

width = 96;

height = 64;

x = d3.scale.linear().range([0, width - 2]);

y = d3.scale.linear().range([height - 4, 0]);

parseDate = d3.time.format("%Y-%m-%d").parse;

line = d3.svg.line().interpolate("basis").x(function(d) {
  return x(d[0]);
}).y(function(d) {
  return y(d[1]);
});

sparkline = function(g, data) {
  g.append('path').datum(data).classed('sparkline', true).attr('d', line);
  return g.append('circle').classed('sparkcircle', true).attr('cx', function() {
    return x(_.last(data)[0]);
  }).attr('cy', function() {
    return y(_.last(data)[1]);
  }).attr('r', 1.5);
};

Summary = (function() {
  function Summary() {
    this.calls = [];
    this.dates = [];
  }

  Summary.prototype.add = function(points) {
    var iter;
    iter = function(e, i, l) {
      var date, date_pos, _ref;
      date_pos = _.sortedIndex(this.dates, e[0]);
      date = (_ref = this.dates[date_pos]) != null ? _ref : 0;
      if (e[0].valueOf() !== date.valueOf()) {
        this.dates = _.first(this.dates, date_pos).concat([e[0]], _.rest(this.dates, date_pos));
        this.calls = _.first(this.calls, date_pos).concat([0], _.rest(this.calls, date_pos));
      }
      return this.calls[date_pos] += e[1];
    };
    return _.each(points, iter, this);
  };

  Summary.prototype.points = function() {
    return _.zip(this.dates, this.calls);
  };

  return Summary;

})();

all_states = new Summary;

build = function(data) {
  var body, media_li, sum, svg, total_li;
  console.log(data);
  media_li = d3.select('#programs').selectAll('li').data(data.contents.data).enter().append("li").classed("list-group-item", true).append("div").classed("media", true);
  media_li.each(function(d, i) {
    var body, calls, dates, media, points, svg;
    dates = _.map(d.x, function(v, i, l) {
      return parseDate(v);
    });
    calls = _.map(d.y, function(v, i, l) {
      var _name;
      return v - (l[_name = i - 1] != null ? l[_name] : l[_name] = 0);
    });
    points = _.zip(dates, calls);
    all_states.add(points);
    x.domain(d3.extent(dates));
    y.domain(d3.extent(calls));
    media = d3.select(this);
    svg = media.append("div").classed("pull-left", true).append('svg').classed("media-object", true).attr('width', width).attr('height', height).append('g').attr('transform', 'translate(0, 2)');
    sparkline(svg, points);
    body = media.append('div').classed("media-body", true);
    body.append('h4').classed("media-heading", true).text(function(d, i) {
      return d.name;
    });
    body.append('p').text(function(d, i) {
      return "TOTAL CALLS: " + _.last(d.y);
    });
    body.append('p').text(function(d, i) {
      var sum;
      sum = _.last(d.y);
      return "DAILY AVG: " + ExtMath.truncate(sum / d.y.length, 2);
    });
    return body.append('p').text(function(d, i) {
      var diff, lasttwo;
      lasttwo = _.last(calls, 2);
      diff = (lasttwo[1] != null) - (lasttwo[0] != null ? lasttwo[0] : lasttwo[0] = 0);
      return "CHG: " + diff;
    });
  });
  total_li = d3.select("#total").append("li").classed("list-group-item", true).append("div").classed("media", true);
  x.domain(d3.extent(all_states.dates));
  y.domain(d3.extent(all_states.calls));
  svg = total_li.append("div").classed("pull-left", true).append('svg').classed("media-object", true).attr('width', width).attr('height', height).append('g').attr('transform', 'translate(0, 2)');
  sparkline(svg, all_states.points());
  sum = _.reduce(all_states.calls, _sum);
  body = total_li.append('div').classed("media-body", true);
  body.append('h4').classed("media-heading", true).text("ALL");
  body.append('p').text(function(d, i) {
    return "TOTAL CALLS: " + sum;
  });
  body.append('p').text(function(d, i) {
    return "DAILY AVG: " + ExtMath.truncate(sum / all_states.calls.length, 2);
  });
  return body.append('p').text(function(d, i) {
    var diff, lasttwo;
    lasttwo = _.last(all_states.calls, 2);
    diff = (lasttwo[1] != null) - (lasttwo[0] != null ? lasttwo[0] : lasttwo[0] = 0);
    return "CHG: " + diff;
  });
};

$(document).ready(function() {
  var data_url;
  data_url = 'http://whateverorigin.org/get?url=' + encodeURIComponent('https://plot.ly/~lippytak/184/balance-metrics-checks.json') + '&callback=?';
  return $.getJSON(data_url, build);
});

//# sourceMappingURL=data:application/json;base64,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QURSLENBL0VBLENBQUE7QUFBQSxFQWtGQSxJQUFJLENBQUMsTUFBTCxDQUFZLEdBQVosQ0FDRSxDQUFDLElBREgsQ0FDUSxTQUFDLENBQUQsRUFBRyxDQUFILEdBQUE7V0FDSixhQUFBLEdBQWlCLE9BQU8sQ0FBQyxRQUFSLENBQWlCLEdBQUEsR0FBTSxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQXhDLEVBQStDLENBQS9DLEVBRGI7RUFBQSxDQURSLENBbEZBLENBQUE7U0FxRkEsSUFBSSxDQUFDLE1BQUwsQ0FBWSxHQUFaLENBQ0UsQ0FBQyxJQURILENBQ1EsU0FBQyxDQUFELEVBQUcsQ0FBSCxHQUFBO0FBQ0osUUFBQSxhQUFBO0FBQUEsSUFBQSxPQUFBLEdBQVEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxVQUFVLENBQUMsS0FBbEIsRUFBd0IsQ0FBeEIsQ0FBUixDQUFBO0FBQUEsSUFDQSxJQUFBLEdBQU0sb0JBQUEseUJBQWMsT0FBUSxDQUFBLENBQUEsSUFBUixPQUFRLENBQUEsQ0FBQSxJQUFJLEVBRGhDLENBQUE7V0FFQSxPQUFBLEdBQVcsS0FIUDtFQUFBLENBRFIsRUF0Rkk7QUFBQSxDQXJEUixDQUFBOztBQUFBLENBaUpBLENBQUUsUUFBRixDQUFXLENBQUMsS0FBWixDQUFrQixTQUFBLEdBQUE7QUFDaEIsTUFBQSxRQUFBO0FBQUEsRUFBQSxRQUFBLEdBQVUsb0NBQUEsR0FBdUMsa0JBQUEsQ0FBbUIsMkRBQW5CLENBQXZDLEdBQXlILGFBQW5JLENBQUE7U0FDQSxDQUFDLENBQUMsT0FBRixDQUFVLFFBQVYsRUFBb0IsS0FBcEIsRUFGZ0I7QUFBQSxDQUFsQixDQWpKQSxDQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiMgY29waWVkIGZyb20gaHR0cDovL3d3dy5jYWxpY293ZWJkZXYuY29tLzIwMTEvMDUvMDEvc2ltcGxlLWNvZmZlZXNjcmlwdC1pbnRyb2R1Y3Rpb24vXG5jbGFzcyBFeHRNYXRoIGV4dGVuZHMgTWF0aFxuICBAdHJ1bmNhdGUgPSAoeCwgcHJlY2lzaW9uID0gMCkgLT5cbiAgICBzY2FsZXMgPSBbMSwgMTAsIDEwMCwgMTAwMCwgMTAwMDAsIDEwMDAwMCwgMTAwMDAwMCwgMTAwMDAwMDAsIDEwMDAwMDAwMF1cbiAgICBzY2FsZSA9IHNjYWxlc1twcmVjaXNpb25dXG4gICAgTWF0aC5yb3VuZCh4ICogc2NhbGUpIC8gc2NhbGVcblxuX3N1bSA9IChtZW1vLCBudW0pIC0+IG1lbW8gKyBudW1cblxuIyBzcGFya2xpbmUgYWRhcHRlZCBmcm9tIGh0dHA6Ly93d3cudG5vZGEuY29tL2Jsb2cvMjAxMy0xMi0xOVxud2lkdGggPSA5NlxuaGVpZ2h0ID0gNjRcbnggPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgd2lkdGggLSAyXSlcbnkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbaGVpZ2h0IC0gNCwgMF0pXG5wYXJzZURhdGUgPSBkMy50aW1lLmZvcm1hdChcIiVZLSVtLSVkXCIpLnBhcnNlXG5cbmxpbmUgPSBkMy5zdmcubGluZSgpXG4gIC5pbnRlcnBvbGF0ZShcImJhc2lzXCIpXG4gIC54KCAoZCkgLT4geCggZFswXSApIClcbiAgLnkoIChkKSAtPiB5KCBkWzFdICkgKVxuXG5zcGFya2xpbmUgPSAoZywgZGF0YSkgLT4gXG4gIGcuYXBwZW5kKCdwYXRoJylcbiAgICAuZGF0dW0oZGF0YSlcbiAgICAuY2xhc3NlZCgnc3BhcmtsaW5lJyx0cnVlKVxuICAgIC5hdHRyKCdkJywgbGluZSlcblxuICBnLmFwcGVuZCgnY2lyY2xlJylcbiAgICAuY2xhc3NlZCgnc3BhcmtjaXJjbGUnLHRydWUpXG4gICAgLmF0dHIoJ2N4JywgLT4geCggXy5sYXN0KGRhdGEpWzBdICkgKVxuICAgIC5hdHRyKCdjeScsIC0+IHkoIF8ubGFzdChkYXRhKVsxXSApIClcbiAgICAuYXR0cigncicsIDEuNSlcblxuXG5jbGFzcyBTdW1tYXJ5XG4gIGNvbnN0cnVjdG9yOi0+ICBcbiAgICBAY2FsbHM9W11cbiAgICBAZGF0ZXM9W11cbiAgYWRkOiAocG9pbnRzKS0+XG4gICAgaXRlciA9IChlLGksbCktPlxuICAgICAgZGF0ZV9wb3MgPSBfLnNvcnRlZEluZGV4KEBkYXRlcyxlWzBdKVxuICAgICAgZGF0ZSA9IEBkYXRlc1tkYXRlX3Bvc10gPyAwXG4gICAgICBpZiBlWzBdLnZhbHVlT2YoKSBpc250IGRhdGUudmFsdWVPZigpXG4gICAgICAgIEBkYXRlcz0gXy5maXJzdChAZGF0ZXMsZGF0ZV9wb3MpLmNvbmNhdCAgW2VbMF1dICwgXy5yZXN0KEBkYXRlcyxkYXRlX3BvcylcbiAgICAgICAgQGNhbGxzPSBfLmZpcnN0KEBjYWxscyxkYXRlX3BvcykuY29uY2F0ICBbMF0gLCBfLnJlc3QoQGNhbGxzLGRhdGVfcG9zKVxuICAgICAgQGNhbGxzW2RhdGVfcG9zXSAgKz0gZVsxXVxuXG4gICAgXy5lYWNoIHBvaW50cyxpdGVyLEBcblxuICBwb2ludHM6IC0+ICAgIFxuICAgIF8uemlwIEBkYXRlcyxAY2FsbHNcblxuYWxsX3N0YXRlcz0gbmV3IFN1bW1hcnkgICAgICAgIFxuXG5idWlsZCA9IChkYXRhKS0+XG4gICAgY29uc29sZS5sb2coZGF0YSlcbiAgICBcbiAgICBtZWRpYV9saSA9IGQzLnNlbGVjdCgnI3Byb2dyYW1zJylcbiAgICAgIC5zZWxlY3RBbGwoJ2xpJylcbiAgICAgIC5kYXRhKGRhdGEuY29udGVudHMuZGF0YSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKFwibGlcIilcbiAgICAgICAgLmNsYXNzZWQoXCJsaXN0LWdyb3VwLWl0ZW1cIix0cnVlKVxuICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuY2xhc3NlZChcIm1lZGlhXCIsdHJ1ZSlcblxuICAgIG1lZGlhX2xpIFxuICAgICAgLmVhY2ggKGQsaSktPlxuICAgICAgICBkYXRlcyA9IF8ubWFwKGQueCwgKHYsaSxsKSAtPiBwYXJzZURhdGUgdiApIFxuICAgICAgICBjYWxscyA9IF8ubWFwKGQueSwgKHYsaSxsKSAtPiB2LWxbaS0xXT89MCApICBcbiAgICAgICAgcG9pbnRzID0gXy56aXAoZGF0ZXMsY2FsbHMpXG4gICAgICAgIGFsbF9zdGF0ZXMuYWRkIHBvaW50c1xuXG4gICAgICAgIHguZG9tYWluIGQzLmV4dGVudCBkYXRlcyBcbiAgICAgICAgeS5kb21haW4gZDMuZXh0ZW50IGNhbGxzICBcblxuICAgICAgICBtZWRpYSA9IGQzLnNlbGVjdCBAXG5cbiAgICAgICAgc3ZnID0gbWVkaWEuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgLmNsYXNzZWQoXCJwdWxsLWxlZnRcIix0cnVlKVxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAuY2xhc3NlZChcIm1lZGlhLW9iamVjdFwiLHRydWUpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwgMiknKTtcblxuICAgICAgICBzcGFya2xpbmUgc3ZnLCBwb2ludHNcbiAgICAgICAgXG4gICAgICAgIGJvZHkgPSBtZWRpYSAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgIC5jbGFzc2VkKFwibWVkaWEtYm9keVwiLHRydWUpXG4gICAgICAgIGJvZHkuYXBwZW5kKCdoNCcpXG4gICAgICAgICAgLmNsYXNzZWQoXCJtZWRpYS1oZWFkaW5nXCIsdHJ1ZSlcbiAgICAgICAgICAudGV4dCggKGQsaSktPiBkLm5hbWUgKVxuICAgICAgICBib2R5LmFwcGVuZCgncCcpXG4gICAgICAgICAgLnRleHQgKGQsaSktPiBcbiAgICAgICAgICAgIFwiVE9UQUwgQ0FMTFM6IFwiKyBfLmxhc3QoZC55KSAgXG4gICAgICAgIGJvZHkuYXBwZW5kKCdwJylcbiAgICAgICAgICAudGV4dCAoZCxpKS0+IFxuICAgICAgICAgICAgc3VtPSBfLmxhc3QoZC55KVxuICAgICAgICAgICAgXCJEQUlMWSBBVkc6IFwiICsgIEV4dE1hdGgudHJ1bmNhdGUgc3VtIC8gZC55Lmxlbmd0aCwyXG4gICAgICAgIGJvZHkuYXBwZW5kKCdwJylcbiAgICAgICAgICAudGV4dCAoZCxpKS0+IFxuICAgICAgICAgICAgbGFzdHR3bz1fLmxhc3QoY2FsbHMsMilcbiAgICAgICAgICAgIGRpZmY9IGxhc3R0d29bMV0/IC0gbGFzdHR3b1swXT89MFxuICAgICAgICAgICAgXCJDSEc6IFwiICsgIGRpZmZcblxuICAgIHRvdGFsX2xpID0gZDMuc2VsZWN0KFwiI3RvdGFsXCIpXG4gICAgICAuYXBwZW5kKFwibGlcIilcbiAgICAgICAgLmNsYXNzZWQoXCJsaXN0LWdyb3VwLWl0ZW1cIix0cnVlKVxuICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuY2xhc3NlZChcIm1lZGlhXCIsdHJ1ZSlcbiAgICAgIFxuICAgIHguZG9tYWluIGQzLmV4dGVudCBhbGxfc3RhdGVzLmRhdGVzIFxuICAgIHkuZG9tYWluIGQzLmV4dGVudCBhbGxfc3RhdGVzLmNhbGxzICBcblxuICAgIHN2ZyA9IHRvdGFsX2xpIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgIC5jbGFzc2VkKFwicHVsbC1sZWZ0XCIsdHJ1ZSlcbiAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgIC5jbGFzc2VkKFwibWVkaWEtb2JqZWN0XCIsdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsIDIpJyk7XG5cbiAgICAgIFxuICAgIHNwYXJrbGluZSBzdmcsIGFsbF9zdGF0ZXMucG9pbnRzKClcbiAgICBzdW09Xy5yZWR1Y2UoYWxsX3N0YXRlcy5jYWxscywgX3N1bSkgXG4gICAgXG4gICAgYm9keSA9IHRvdGFsX2xpLmFwcGVuZCgnZGl2JylcbiAgICAgIC5jbGFzc2VkKFwibWVkaWEtYm9keVwiLHRydWUpXG4gICAgYm9keS5hcHBlbmQoJ2g0JylcbiAgICAgIC5jbGFzc2VkKFwibWVkaWEtaGVhZGluZ1wiLHRydWUpXG4gICAgICAudGV4dCggXCJBTExcIiApXG4gICAgYm9keS5hcHBlbmQoJ3AnKVxuICAgICAgLnRleHQgKGQsaSktPlxuICAgICAgICBcIlRPVEFMIENBTExTOiBcIisgc3VtXG4gICAgYm9keS5hcHBlbmQoJ3AnKVxuICAgICAgLnRleHQgKGQsaSktPiBcbiAgICAgICAgXCJEQUlMWSBBVkc6IFwiICsgIEV4dE1hdGgudHJ1bmNhdGUgc3VtIC8gYWxsX3N0YXRlcy5jYWxscy5sZW5ndGgsMlxuICAgIGJvZHkuYXBwZW5kKCdwJylcbiAgICAgIC50ZXh0IChkLGkpLT4gXG4gICAgICAgIGxhc3R0d289Xy5sYXN0KGFsbF9zdGF0ZXMuY2FsbHMsMilcbiAgICAgICAgZGlmZj0gbGFzdHR3b1sxXT8gLSBsYXN0dHdvWzBdPz0wXG4gICAgICAgIFwiQ0hHOiBcIiArICBkaWZmXG5cbiQoZG9jdW1lbnQpLnJlYWR5IC0+XG4gIGRhdGFfdXJsID0naHR0cDovL3doYXRldmVyb3JpZ2luLm9yZy9nZXQ/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQoJ2h0dHBzOi8vcGxvdC5seS9+bGlwcHl0YWsvMTg0L2JhbGFuY2UtbWV0cmljcy1jaGVja3MuanNvbicpICsgJyZjYWxsYmFjaz0/JyBcbiAgJC5nZXRKU09OIGRhdGFfdXJsICxidWlsZFxuXG4iXX0=