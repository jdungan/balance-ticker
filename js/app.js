var ExtMath, build, height, line, parseDate, sparkline, width, x, y, _sum,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

ExtMath = (function(_super) {
  __extends(ExtMath, _super);

  function ExtMath() {
    return ExtMath.__super__.constructor.apply(this, arguments);
  }

  ExtMath.truncate = function(x, precision) {
    var scale, scales;
    if (precision == null) {
      precision = 0;
    }
    scales = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000];
    scale = scales[precision];
    return Math.round(x * scale) / scale;
  };

  return ExtMath;

})(Math);

_sum = function(memo, num) {
  return memo + num;
};

width = 64;

height = 64;

x = d3.scale.linear().range([0, width - 2]);

y = d3.scale.linear().range([height - 4, 0]);

parseDate = d3.time.format("%Y-%m-%d").parse;

line = d3.svg.line().interpolate("basis").x(function(d) {
  return x(d[0]);
}).y(function(d) {
  return y(d[1]);
});

sparkline = function(g, data) {
  var dates, points;
  dates = _.map(data.x, function(d) {
    return parseDate(d);
  });
  points = _.zip(dates, data.y);
  x.domain(d3.extent(dates));
  y.domain(d3.extent(data.y));
  g.append('path').datum(points).classed('sparkline', true).attr('d', line);
  return g.append('circle').classed('sparkcircle', true).attr('cx', function() {
    return x(_.last(dates));
  }).attr('cy', function() {
    return y(_.last(data.y));
  }).attr('r', 1.5);
};

build = function(data) {
  var media_li;
  console.log(data.contents.data);
  media_li = d3.select('#programs').selectAll('li').data(data.contents.data).enter().append("li").classed("list-group-item", true).append("div").classed("media", true);
  return media_li.each(function(d, i) {
    var body, media, svg;
    media = d3.select(this);
    svg = media.append("div").classed("pull-left", true).append('svg').classed("media-object", true).attr('width', width).attr('height', height).append('g').attr('transform', 'translate(0, 2)');
    sparkline(svg, d);
    body = media.append('div').classed("media-body", true);
    body.append('h4').classed("media-heading", true).text(function(d, i) {
      return d.name;
    });
    body.append('p').text(function(d, i) {
      var sum;
      sum = _.reduce(d.y, _sum, 0);
      return "TOTAL CALLS: " + sum;
    });
    return body.append('p').text(function(d, i) {
      var sum;
      sum = _.reduce(d.y, _sum, 0);
      return "DAILY AVG: " + ExtMath.truncate(sum / d.y.length, 2);
    });
  });
};

$(document).ready(function() {
  var data_url;
  data_url = 'http://whateverorigin.org/get?url=' + encodeURIComponent('https://plot.ly/~lippytak/184/balance-metrics-checks.json') + '&callback=?';
  return $.getJSON(data_url, build);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxxRUFBQTtFQUFBO2lTQUFBOztBQUFBO0FBQ0UsNEJBQUEsQ0FBQTs7OztHQUFBOztBQUFBLEVBQUEsT0FBQyxDQUFBLFFBQUQsR0FBWSxTQUFDLENBQUQsRUFBSSxTQUFKLEdBQUE7QUFDVixRQUFBLGFBQUE7O01BRGMsWUFBWTtLQUMxQjtBQUFBLElBQUEsTUFBQSxHQUFTLENBQUMsQ0FBRCxFQUFJLEVBQUosRUFBUSxHQUFSLEVBQWEsSUFBYixFQUFtQixLQUFuQixFQUEwQixNQUExQixFQUFrQyxPQUFsQyxFQUEyQyxRQUEzQyxFQUFxRCxTQUFyRCxDQUFULENBQUE7QUFBQSxJQUNBLEtBQUEsR0FBUSxNQUFPLENBQUEsU0FBQSxDQURmLENBQUE7V0FFQSxJQUFJLENBQUMsS0FBTCxDQUFXLENBQUEsR0FBSSxLQUFmLENBQUEsR0FBd0IsTUFIZDtFQUFBLENBQVosQ0FBQTs7aUJBQUE7O0dBRG9CLEtBQXRCLENBQUE7O0FBQUEsSUFNQSxHQUFPLFNBQUMsSUFBRCxFQUFPLEdBQVAsR0FBQTtTQUFlLElBQUEsR0FBTyxJQUF0QjtBQUFBLENBTlAsQ0FBQTs7QUFBQSxLQVNBLEdBQVEsRUFUUixDQUFBOztBQUFBLE1BVUEsR0FBUyxFQVZULENBQUE7O0FBQUEsQ0FXQSxHQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBVCxDQUFBLENBQWlCLENBQUMsS0FBbEIsQ0FBd0IsQ0FBQyxDQUFELEVBQUksS0FBQSxHQUFRLENBQVosQ0FBeEIsQ0FYSixDQUFBOztBQUFBLENBWUEsR0FBSSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQVQsQ0FBQSxDQUFpQixDQUFDLEtBQWxCLENBQXdCLENBQUMsTUFBQSxHQUFTLENBQVYsRUFBYSxDQUFiLENBQXhCLENBWkosQ0FBQTs7QUFBQSxTQWFBLEdBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFSLENBQWUsVUFBZixDQUEwQixDQUFDLEtBYnZDLENBQUE7O0FBQUEsSUFlQSxHQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBUCxDQUFBLENBQ0wsQ0FBQyxXQURJLENBQ1EsT0FEUixDQUVMLENBQUMsQ0FGSSxDQUVELFNBQUMsQ0FBRCxHQUFBO1NBQU8sQ0FBQSxDQUFHLENBQUUsQ0FBQSxDQUFBLENBQUwsRUFBUDtBQUFBLENBRkMsQ0FHTCxDQUFDLENBSEksQ0FHRCxTQUFDLENBQUQsR0FBQTtTQUFPLENBQUEsQ0FBRyxDQUFFLENBQUEsQ0FBQSxDQUFMLEVBQVA7QUFBQSxDQUhDLENBZlAsQ0FBQTs7QUFBQSxTQW9CQSxHQUFZLFNBQUMsQ0FBRCxFQUFJLElBQUosR0FBQTtBQUNWLE1BQUEsYUFBQTtBQUFBLEVBQUEsS0FBQSxHQUFRLENBQUMsQ0FBQyxHQUFGLENBQU0sSUFBSSxDQUFDLENBQVgsRUFBYyxTQUFDLENBQUQsR0FBQTtXQUFPLFNBQUEsQ0FBVSxDQUFWLEVBQVA7RUFBQSxDQUFkLENBQVIsQ0FBQTtBQUFBLEVBQ0EsTUFBQSxHQUFTLENBQUMsQ0FBQyxHQUFGLENBQU0sS0FBTixFQUFZLElBQUksQ0FBQyxDQUFqQixDQURULENBQUE7QUFBQSxFQUVBLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBRSxDQUFDLE1BQUgsQ0FBVSxLQUFWLENBQVQsQ0FGQSxDQUFBO0FBQUEsRUFHQSxDQUFDLENBQUMsTUFBRixDQUFTLEVBQUUsQ0FBQyxNQUFILENBQVUsSUFBSSxDQUFDLENBQWYsQ0FBVCxDQUhBLENBQUE7QUFBQSxFQUtBLENBQUMsQ0FBQyxNQUFGLENBQVMsTUFBVCxDQUNFLENBQUMsS0FESCxDQUNTLE1BRFQsQ0FFRSxDQUFDLE9BRkgsQ0FFVyxXQUZYLEVBRXVCLElBRnZCLENBR0UsQ0FBQyxJQUhILENBR1EsR0FIUixFQUdhLElBSGIsQ0FMQSxDQUFBO1NBVUEsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxRQUFULENBQ0UsQ0FBQyxPQURILENBQ1csYUFEWCxFQUN5QixJQUR6QixDQUVFLENBQUMsSUFGSCxDQUVRLElBRlIsRUFFYyxTQUFBLEdBQUE7V0FBRyxDQUFBLENBQUUsQ0FBQyxDQUFDLElBQUYsQ0FBTyxLQUFQLENBQUYsRUFBSDtFQUFBLENBRmQsQ0FHRSxDQUFDLElBSEgsQ0FHUSxJQUhSLEVBR2MsU0FBQSxHQUFBO1dBQUcsQ0FBQSxDQUFFLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBSSxDQUFDLENBQVosQ0FBRixFQUFIO0VBQUEsQ0FIZCxDQUlFLENBQUMsSUFKSCxDQUlRLEdBSlIsRUFJYSxHQUpiLEVBWFU7QUFBQSxDQXBCWixDQUFBOztBQUFBLEtBcUNBLEdBQVEsU0FBQyxJQUFELEdBQUE7QUFDSixNQUFBLFFBQUE7QUFBQSxFQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUExQixDQUFBLENBQUE7QUFBQSxFQUNBLFFBQUEsR0FBVyxFQUFFLENBQUMsTUFBSCxDQUFVLFdBQVYsQ0FDVCxDQUFDLFNBRFEsQ0FDRSxJQURGLENBRVQsQ0FBQyxJQUZRLENBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUZYLENBR1QsQ0FBQyxLQUhRLENBQUEsQ0FJVCxDQUFDLE1BSlEsQ0FJRCxJQUpDLENBS1AsQ0FBQyxPQUxNLENBS0UsaUJBTEYsRUFLb0IsSUFMcEIsQ0FNVCxDQUFDLE1BTlEsQ0FNRCxLQU5DLENBT1AsQ0FBQyxPQVBNLENBT0UsT0FQRixFQU9VLElBUFYsQ0FEWCxDQUFBO1NBVUEsUUFDRSxDQUFDLElBREgsQ0FDUSxTQUFDLENBQUQsRUFBRyxDQUFILEdBQUE7QUFDSixRQUFBLGdCQUFBO0FBQUEsSUFBQSxLQUFBLEdBQVEsRUFBRSxDQUFDLE1BQUgsQ0FBVSxJQUFWLENBQVIsQ0FBQTtBQUFBLElBRUEsR0FBQSxHQUFNLEtBQUssQ0FBQyxNQUFOLENBQWEsS0FBYixDQUNKLENBQUMsT0FERyxDQUNLLFdBREwsRUFDaUIsSUFEakIsQ0FFSixDQUFDLE1BRkcsQ0FFSSxLQUZKLENBR0YsQ0FBQyxPQUhDLENBR08sY0FIUCxFQUdzQixJQUh0QixDQUlGLENBQUMsSUFKQyxDQUlJLE9BSkosRUFJYSxLQUpiLENBS0YsQ0FBQyxJQUxDLENBS0ksUUFMSixFQUtjLE1BTGQsQ0FNRixDQUFDLE1BTkMsQ0FNTSxHQU5OLENBT0EsQ0FBQyxJQVBELENBT00sV0FQTixFQU9tQixpQkFQbkIsQ0FGTixDQUFBO0FBQUEsSUFXQSxTQUFBLENBQVUsR0FBVixFQUFlLENBQWYsQ0FYQSxDQUFBO0FBQUEsSUFhQSxJQUFBLEdBQU8sS0FBTSxDQUFDLE1BQVAsQ0FBYyxLQUFkLENBQ0wsQ0FBQyxPQURJLENBQ0ksWUFESixFQUNpQixJQURqQixDQWJQLENBQUE7QUFBQSxJQWVBLElBQUksQ0FBQyxNQUFMLENBQVksSUFBWixDQUNFLENBQUMsT0FESCxDQUNXLGVBRFgsRUFDMkIsSUFEM0IsQ0FFRSxDQUFDLElBRkgsQ0FFUyxTQUFDLENBQUQsRUFBRyxDQUFILEdBQUE7YUFBUSxDQUFDLENBQUMsS0FBVjtJQUFBLENBRlQsQ0FmQSxDQUFBO0FBQUEsSUFrQkEsSUFBSSxDQUFDLE1BQUwsQ0FBWSxHQUFaLENBQ0UsQ0FBQyxJQURILENBQ1EsU0FBQyxDQUFELEVBQUcsQ0FBSCxHQUFBO0FBQ0osVUFBQSxHQUFBO0FBQUEsTUFBQSxHQUFBLEdBQUksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxDQUFDLENBQUMsQ0FBWCxFQUFjLElBQWQsRUFBb0IsQ0FBcEIsQ0FBSixDQUFBO2FBQ0EsZUFBQSxHQUFnQixJQUZaO0lBQUEsQ0FEUixDQWxCQSxDQUFBO1dBc0JBLElBQUksQ0FBQyxNQUFMLENBQVksR0FBWixDQUNFLENBQUMsSUFESCxDQUNRLFNBQUMsQ0FBRCxFQUFHLENBQUgsR0FBQTtBQUNKLFVBQUEsR0FBQTtBQUFBLE1BQUEsR0FBQSxHQUFLLENBQUMsQ0FBQyxNQUFGLENBQVMsQ0FBQyxDQUFDLENBQVgsRUFBZSxJQUFmLEVBQXNCLENBQXRCLENBQUwsQ0FBQTthQUNBLGFBQUEsR0FBaUIsT0FBTyxDQUFDLFFBQVIsQ0FBaUIsR0FBQSxHQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBM0IsRUFBa0MsQ0FBbEMsRUFGYjtJQUFBLENBRFIsRUF2Qkk7RUFBQSxDQURSLEVBWEk7QUFBQSxDQXJDUixDQUFBOztBQUFBLENBOEVBLENBQUUsUUFBRixDQUFXLENBQUMsS0FBWixDQUFrQixTQUFBLEdBQUE7QUFDaEIsTUFBQSxRQUFBO0FBQUEsRUFBQSxRQUFBLEdBQVUsb0NBQUEsR0FBdUMsa0JBQUEsQ0FBbUIsMkRBQW5CLENBQXZDLEdBQXlILGFBQW5JLENBQUE7U0FDQSxDQUFDLENBQUMsT0FBRixDQUFVLFFBQVYsRUFBb0IsS0FBcEIsRUFGZ0I7QUFBQSxDQUFsQixDQTlFQSxDQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiMgY29waWVkIGZyb20gaHR0cDovL3d3dy5jYWxpY293ZWJkZXYuY29tLzIwMTEvMDUvMDEvc2ltcGxlLWNvZmZlZXNjcmlwdC1pbnRyb2R1Y3Rpb24vXG5jbGFzcyBFeHRNYXRoIGV4dGVuZHMgTWF0aFxuICBAdHJ1bmNhdGUgPSAoeCwgcHJlY2lzaW9uID0gMCkgLT5cbiAgICBzY2FsZXMgPSBbMSwgMTAsIDEwMCwgMTAwMCwgMTAwMDAsIDEwMDAwMCwgMTAwMDAwMCwgMTAwMDAwMDAsIDEwMDAwMDAwMF1cbiAgICBzY2FsZSA9IHNjYWxlc1twcmVjaXNpb25dXG4gICAgTWF0aC5yb3VuZCh4ICogc2NhbGUpIC8gc2NhbGVcblxuX3N1bSA9IChtZW1vLCBudW0pIC0+IG1lbW8gKyBudW1cblxuIyBzcGFya2xpbmUgYWRhcHRlZCBmcm9tIGh0dHA6Ly93d3cudG5vZGEuY29tL2Jsb2cvMjAxMy0xMi0xOVxud2lkdGggPSA2NFxuaGVpZ2h0ID0gNjRcbnggPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgd2lkdGggLSAyXSlcbnkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbaGVpZ2h0IC0gNCwgMF0pXG5wYXJzZURhdGUgPSBkMy50aW1lLmZvcm1hdChcIiVZLSVtLSVkXCIpLnBhcnNlXG5cbmxpbmUgPSBkMy5zdmcubGluZSgpXG4gIC5pbnRlcnBvbGF0ZShcImJhc2lzXCIpXG4gIC54KCAoZCkgLT4geCggZFswXSApIClcbiAgLnkoIChkKSAtPiB5KCBkWzFdICkgKVxuXG5zcGFya2xpbmUgPSAoZywgZGF0YSkgLT4gXG4gIGRhdGVzID0gXy5tYXAoZGF0YS54LCAoZCkgLT4gcGFyc2VEYXRlIGQgKVxuICBwb2ludHMgPSBfLnppcChkYXRlcyxkYXRhLnkpXG4gIHguZG9tYWluIGQzLmV4dGVudCBkYXRlcyBcbiAgeS5kb21haW4gZDMuZXh0ZW50IGRhdGEueSAgXG5cbiAgZy5hcHBlbmQoJ3BhdGgnKVxuICAgIC5kYXR1bShwb2ludHMpXG4gICAgLmNsYXNzZWQoJ3NwYXJrbGluZScsdHJ1ZSlcbiAgICAuYXR0cignZCcsIGxpbmUpXG5cbiAgZy5hcHBlbmQoJ2NpcmNsZScpXG4gICAgLmNsYXNzZWQoJ3NwYXJrY2lyY2xlJyx0cnVlKVxuICAgIC5hdHRyKCdjeCcsIC0+IHgoXy5sYXN0IGRhdGVzKSApXG4gICAgLmF0dHIoJ2N5JywgLT4geShfLmxhc3QgZGF0YS55KSApXG4gICAgLmF0dHIoJ3InLCAxLjUpXG5cbmJ1aWxkID0gKGRhdGEpLT5cbiAgICBjb25zb2xlLmxvZyhkYXRhLmNvbnRlbnRzLmRhdGEpXG4gICAgbWVkaWFfbGkgPSBkMy5zZWxlY3QoJyNwcm9ncmFtcycpXG4gICAgICAuc2VsZWN0QWxsKCdsaScpXG4gICAgICAuZGF0YShkYXRhLmNvbnRlbnRzLmRhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZChcImxpXCIpXG4gICAgICAgIC5jbGFzc2VkKFwibGlzdC1ncm91cC1pdGVtXCIsdHJ1ZSlcbiAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmNsYXNzZWQoXCJtZWRpYVwiLHRydWUpXG4gICAgICAgICAgXG4gICAgbWVkaWFfbGkgXG4gICAgICAuZWFjaCAoZCxpKS0+XG4gICAgICAgIG1lZGlhID0gZDMuc2VsZWN0IEBcblxuICAgICAgICBzdmcgPSBtZWRpYS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAuY2xhc3NlZChcInB1bGwtbGVmdFwiLHRydWUpXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgIC5jbGFzc2VkKFwibWVkaWEtb2JqZWN0XCIsdHJ1ZSlcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCAyKScpO1xuXG4gICAgICAgIHNwYXJrbGluZSBzdmcsIGRcbiAgICAgICAgXG4gICAgICAgIGJvZHkgPSBtZWRpYSAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgIC5jbGFzc2VkKFwibWVkaWEtYm9keVwiLHRydWUpXG4gICAgICAgIGJvZHkuYXBwZW5kKCdoNCcpXG4gICAgICAgICAgLmNsYXNzZWQoXCJtZWRpYS1oZWFkaW5nXCIsdHJ1ZSlcbiAgICAgICAgICAudGV4dCggKGQsaSktPiBkLm5hbWUgKVxuICAgICAgICBib2R5LmFwcGVuZCgncCcpXG4gICAgICAgICAgLnRleHQgKGQsaSktPiBcbiAgICAgICAgICAgIHN1bT1fLnJlZHVjZSBkLnkgLF9zdW0sIDAgXG4gICAgICAgICAgICBcIlRPVEFMIENBTExTOiBcIitzdW0gIFxuICAgICAgICBib2R5LmFwcGVuZCgncCcpXG4gICAgICAgICAgLnRleHQgKGQsaSktPiBcbiAgICAgICAgICAgIHN1bT0gXy5yZWR1Y2UgZC55ICwgX3N1bSAsIDBcbiAgICAgICAgICAgIFwiREFJTFkgQVZHOiBcIiArICBFeHRNYXRoLnRydW5jYXRlIHN1bSAvIGQueS5sZW5ndGgsMlxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5IC0+XG4gIGRhdGFfdXJsID0naHR0cDovL3doYXRldmVyb3JpZ2luLm9yZy9nZXQ/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQoJ2h0dHBzOi8vcGxvdC5seS9+bGlwcHl0YWsvMTg0L2JhbGFuY2UtbWV0cmljcy1jaGVja3MuanNvbicpICsgJyZjYWxsYmFjaz0/JyBcbiAgJC5nZXRKU09OIGRhdGFfdXJsICxidWlsZFxuXG4iXX0=