var DateUtil, ExtMath, Sparkline, Summary, build, parseDate,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

ExtMath = (function(_super) {
  __extends(ExtMath, _super);

  function ExtMath() {
    return ExtMath.__super__.constructor.apply(this, arguments);
  }

  ExtMath.truncate = function(x, precision) {
    var scale, scales;
    if (precision == null) {
      precision = 0;
    }
    scales = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000];
    scale = scales[precision];
    return Math.round(x * scale) / scale;
  };

  return ExtMath;

})(Math);

parseDate = d3.time.format("%Y-%m-%d").parse;

DateUtil = function(JSdate, type) {
  if (JSdate) {
    switch (type) {
      case "M/D":
        return (JSdate.getMonth() + 1) + "/" + JSdate.getDate();
    }
  }
};

Sparkline = (function() {
  Sparkline.prototype.width = 96;

  Sparkline.prototype.height = 64;

  Sparkline.prototype.x = d3.scale.linear().range([0, Sparkline.prototype.width - 2]);

  Sparkline.prototype.y = d3.scale.linear().range([Sparkline.prototype.height - 4, 0]);

  function Sparkline(g, d) {
    var line, x, y;
    if (d.calls.length > 0) {
      x = this.x.domain(d3.extent(d.dates));
      y = this.y.domain(d3.extent(d.calls));
      line = d3.svg.line().interpolate("basis").x(function(d) {
        return x(d[0]);
      }).y(function(d) {
        return y(d[1]);
      });
      g.append('path').datum(d.points()).classed('sparkline', true).attr('d', line);
      g.append('circle').classed('sparkcircle', true).attr('cx', this.x(_.last(d.dates))).attr('cy', this.y(_.last(d.calls))).attr('r', 1.5);
      g;
    }
  }

  return Sparkline;

})();

Summary = (function() {
  function Summary(obj) {
    if (obj) {
      this.name = obj.name, this.dates = obj.dates, this.calls = obj.calls;
    }
    if (this.name == null) {
      this.name = "";
    }
    if (this.dates == null) {
      this.dates = [];
    }
    if (this.calls == null) {
      this.calls = [];
    }
  }

  Summary.prototype.sum = function(days) {
    if (days == null) {
      days = this.calls;
    }
    if (this.calls.length > 0) {
      return _.reduce(days, function(memo, num) {
        return memo + num;
      });
    } else {
      return 0;
    }
  };

  Summary.prototype.max = function() {
    return _.reduce(this.calls, function(m, n) {
      if (n > m) {
        return n;
      } else {
        return m;
      }
    });
  };

  Summary.prototype.min = function() {
    return _.reduce(this.calls, function(m, n) {
      if (n < m) {
        return n;
      } else {
        return m;
      }
    });
  };

  Summary.prototype.avg = function(moving) {
    var pastdays;
    pastdays = _.last(this.calls, moving);
    return ExtMath.truncate(this.sum(pastdays) / moving, 1);
  };

  Summary.prototype.add = function(points) {
    var iter;
    iter = function(e, i, l) {
      var date, date_pos, _ref;
      date_pos = _.sortedIndex(this.dates, e[0]);
      date = (_ref = this.dates[date_pos]) != null ? _ref : 0;
      if (e[0].valueOf() !== date.valueOf()) {
        this.dates = _.first(this.dates, date_pos).concat([e[0]], _.rest(this.dates, date_pos));
        this.calls = _.first(this.calls, date_pos).concat([0], _.rest(this.calls, date_pos));
      }
      return this.calls[date_pos] += e[1];
    };
    return _.each(points, iter, this);
  };

  Summary.prototype.points = function() {
    return _.zip(this.dates, this.calls);
  };

  return Summary;

})();

build = function(data) {
  var display, media_li, total_calls;
  console.log(data);
  total_calls = new Summary;
  total_calls.name = "ALL";
  display = _.map(data, function(v, i, l) {
    var this_state;
    v.dates = _.map(v.x, function(v, i, l) {
      return parseDate(v);
    });
    v.calls = _.map(v.y, function(v, i, l) {
      var _name;
      return v - (l[_name = i - 1] != null ? l[_name] : l[_name] = 0);
    });
    this_state = new Summary(v);
    total_calls.add(this_state.points());
    return this_state;
  });
  display = _.sortBy(display, function(v) {
    return v.calls[v.calls.length - 2] - v.calls[v.calls.length - 1];
  });
  display.unshift(total_calls);
  media_li = d3.select('#programs').selectAll('li').data(display).enter().append("li").classed("list-group-item", true).append("div").classed("media", true);
  return media_li.each(function(d, i) {
    var body, g, media;
    media = d3.select(this);
    g = media.append("div").classed("pull-left", true).append('svg').classed("media-object", true).attr('width', 96).attr('height', 64).append('g').attr('transform', 'translate(0, 2)');
    new Sparkline(g, d);
    body = media.append('div').classed("media-body", true);
    body.append('h4').classed("media-heading", true).text(d.name);
    body.append('p').text(function(d, i) {
      var sentence;
      sentence = ["There were", "", "balance checks between", "", "and", ""];
      sentence[1] = d.sum();
      sentence[3] = DateUtil(_.first(d.dates), "M/D");
      sentence[5] = DateUtil(_.last(d.dates), "M/D") + ".";
      return sentence.join(" ");
    });
    body.append('p').text(function(d, i) {
      var chk, tenday;
      tenday = d.avg(10);
      chk = tenday === 1 ? " check" : " checks";
      return "There was an average of  " + tenday + chk + " per day over the past 10 days.";
    });
    return body.append('p').text(function(d, i) {
      var diff, lastcalls, lastdates, sentence;
      lastcalls = _.last(d.calls, 2);
      lastdates = _.last(d.dates, 2);
      diff = lastcalls[1] - lastcalls[0];
      sentence = ["There ...", "num", "more", "checks", "on", "date", "than on", "date"];
      sentence[0] = (Math.abs(diff)) === 1 ? "There was" : "There were";
      sentence[1] = Math.abs(diff);
      sentence[2] = diff > 0 ? "more" : "fewer";
      sentence[3] = (Math.abs(diff)) === 1 ? "check" : "checks";
      sentence[5] = DateUtil(lastdates[1], "M/D");
      sentence[7] = DateUtil(lastdates[0], "M/D") + ".";
      if (diff === 0) {
        sentence[1] = "the";
        sentence[2] = "same number of";
        sentence[6] = "and";
      }
      return sentence.join(" ");
    });
  });
};

$(document).ready(function() {
  var data_url, err_msg;
  data_url = 'https://plot.ly/~lippytak/184/balance-metrics-checks.json';
  err_msg = function() {
    return d3.select('#ticker_msg').text('Sorry, the request failed.');
  };
  d3.select('#ticker_msg').text('Retrieving data ... ');
  return $.ajax({
    dataType: "json",
    url: data_url
  }).done(function(data) {
    if (data.data) {
      d3.select('#ticker_msg').text('Sorted by largest daily increase');
      return build(data.data);
    } else {
      return err_msg();
    }
  }).fail(function(err) {
    return err_msg();
  });
});

//# sourceMappingURL=data:application/json;base64,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O0FBQUEsQ0FBbEIsQ0EzSkEsQ0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIjIGNvcGllZCBmcm9tIGh0dHA6Ly93d3cuY2FsaWNvd2ViZGV2LmNvbS8yMDExLzA1LzAxL3NpbXBsZS1jb2ZmZWVzY3JpcHQtaW50cm9kdWN0aW9uL1xuY2xhc3MgRXh0TWF0aCBleHRlbmRzIE1hdGhcbiAgQHRydW5jYXRlID0gKHgsIHByZWNpc2lvbiA9IDApIC0+XG4gICAgc2NhbGVzID0gWzEsIDEwLCAxMDAsIDEwMDAsIDEwMDAwLCAxMDAwMDAsIDEwMDAwMDAsIDEwMDAwMDAwLCAxMDAwMDAwMDBdXG4gICAgc2NhbGUgPSBzY2FsZXNbcHJlY2lzaW9uXVxuICAgIE1hdGgucm91bmQoeCAqIHNjYWxlKSAvIHNjYWxlXG5cbiMgZGF0ZSB1dGlsaXRpZXNcbnBhcnNlRGF0ZSA9IGQzLnRpbWUuZm9ybWF0KFwiJVktJW0tJWRcIikucGFyc2VcblxuRGF0ZVV0aWwgPSAoSlNkYXRlLHR5cGUpLT5cbiAgaWYgSlNkYXRlXG4gICAgc3dpdGNoIHR5cGVcbiAgICAgIHdoZW4gXCJNL0RcIiB0aGVuIChKU2RhdGUuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyBKU2RhdGUuZ2V0RGF0ZSgpXG5cbiMgc3BhcmtsaW5lIGFkYXB0ZWQgZnJvbSBodHRwOi8vd3d3LnRub2RhLmNvbS9ibG9nLzIwMTMtMTItMTlcbmNsYXNzIFNwYXJrbGluZVxuICB3aWR0aCA6IDk2XG4gIGhlaWdodCA6IDY0XG4gIHggOiBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCwgQDo6d2lkdGggLSAyXSlcbiAgeSA6IGQzLnNjYWxlLmxpbmVhcigpLnJhbmdlKFsgQDo6aGVpZ2h0IC0gNCwgMF0pXG4gIGNvbnN0cnVjdG9yOiAoZyxkKS0+XG4gICAgaWYgZC5jYWxscy5sZW5ndGggPiAwXG4gICAgICB4ID0gQHguZG9tYWluIGQzLmV4dGVudCBkLmRhdGVzIFxuICAgICAgeSA9IEB5LmRvbWFpbiBkMy5leHRlbnQgZC5jYWxsc1xuICAgICAgbGluZSA9IGQzLnN2Zy5saW5lKClcbiAgICAgICAgLmludGVycG9sYXRlIFwiYmFzaXNcIlxuICAgICAgICAueCAoZCkgLT4geCBkWzBdXG4gICAgICAgIC55IChkKSAtPiB5IGRbMV1cbiAgICAgICAgXG4gICAgICBnLmFwcGVuZCgncGF0aCcpXG4gICAgICAgIC5kYXR1bShkLnBvaW50cygpKVxuICAgICAgICAuY2xhc3NlZCgnc3BhcmtsaW5lJyx0cnVlKVxuICAgICAgICAuYXR0cignZCcsIGxpbmUpXG5cbiAgICAgIGcuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAuY2xhc3NlZCgnc3BhcmtjaXJjbGUnLHRydWUpXG4gICAgICAgIC5hdHRyKCdjeCcsIEB4IF8ubGFzdCBkLmRhdGVzKVxuICAgICAgICAuYXR0cignY3knLCBAeSBfLmxhc3QgZC5jYWxscylcbiAgICAgICAgLmF0dHIoJ3InLCAxLjUpXG4gICAgICBnXG5cbmNsYXNzIFN1bW1hcnlcbiAgY29uc3RydWN0b3I6KG9iaiktPlxuICAgIGlmIG9ialxuICAgICAge0BuYW1lLEBkYXRlcyxAY2FsbHN9ID0gb2JqXG4gICAgQG5hbWUgPz0gXCJcIlxuICAgIEBkYXRlcyA/PSBbXVxuICAgIEBjYWxscyA/PSBbXVxuICAgIFxuICBzdW0gOiAoZGF5cyktPlxuICAgIGRheXMgPz0gQGNhbGxzXG4gICAgaWYgQGNhbGxzLmxlbmd0aCA+IDBcbiAgICAgIF8ucmVkdWNlIGRheXMsKG1lbW8sIG51bSkgLT4gbWVtbyArIG51bVxuICAgIGVsc2VcbiAgICAgIDBcbiAgbWF4IDogLT4gXy5yZWR1Y2UgQGNhbGxzLChtLG4pLT4gaWYgbj5tIHRoZW4gbiBlbHNlIG1cbiAgbWluIDogLT4gXy5yZWR1Y2UgQGNhbGxzLChtLG4pLT4gaWYgbjxtIHRoZW4gbiBlbHNlIG1cbiAgYXZnIDogKG1vdmluZyktPlxuICAgIHBhc3RkYXlzID0gXy5sYXN0IEBjYWxscyxtb3ZpbmdcbiAgICBFeHRNYXRoLnRydW5jYXRlIEBzdW0ocGFzdGRheXMpIC8gbW92aW5nLDFcbiAgYWRkOiAocG9pbnRzKS0+XG4gICAgaXRlciA9IChlLGksbCktPlxuICAgICAgZGF0ZV9wb3MgPSBfLnNvcnRlZEluZGV4KEBkYXRlcyxlWzBdKVxuICAgICAgZGF0ZSA9IEBkYXRlc1tkYXRlX3Bvc10gPyAwXG4gICAgICBpZiBlWzBdLnZhbHVlT2YoKSBpc250IGRhdGUudmFsdWVPZigpXG4gICAgICAgIEBkYXRlcz0gXy5maXJzdChAZGF0ZXMsZGF0ZV9wb3MpLmNvbmNhdCAgW2VbMF1dICwgXy5yZXN0KEBkYXRlcyxkYXRlX3BvcylcbiAgICAgICAgQGNhbGxzPSBfLmZpcnN0KEBjYWxscyxkYXRlX3BvcykuY29uY2F0ICAgICBbMF0gLCBfLnJlc3QoQGNhbGxzLGRhdGVfcG9zKVxuICAgICAgQGNhbGxzW2RhdGVfcG9zXSAgKz0gZVsxXVxuICAgIF8uZWFjaCBwb2ludHMsaXRlcixAXG4gIHBvaW50czogLT5cbiAgICBfLnppcCBAZGF0ZXMsQGNhbGxzXG5cbmJ1aWxkID0gKGRhdGEpLT5cbiAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgIHRvdGFsX2NhbGxzPSBuZXcgU3VtbWFyeSAgICAgXG4gICAgdG90YWxfY2FsbHMubmFtZSA9XCJBTExcIlxuICAgIGRpc3BsYXkgPSBfLm1hcChcbiAgICAgIGRhdGEsXG4gICAgICAodixpLGwpLT5cbiAgICAgICAgdi5kYXRlcyA9IF8ubWFwKHYueCwgKHYsaSxsKSAtPiBwYXJzZURhdGUgdiApIFxuICAgICAgICB2LmNhbGxzID0gXy5tYXAodi55LCAodixpLGwpIC0+IHYtbFtpLTFdPz0wICkgIFxuICAgICAgICB0aGlzX3N0YXRlID0gbmV3IFN1bW1hcnkodilcbiAgICAgICAgdG90YWxfY2FsbHMuYWRkIHRoaXNfc3RhdGUucG9pbnRzKClcbiAgICAgICAgdGhpc19zdGF0ZVxuICAgIClcbiAgICBcbiAgICAjc29ydCBieSBiaWdnZXN0IGNhbGwgaW5jcmVhc2VcbiAgICBkaXNwbGF5ID0gXy5zb3J0QnkgZGlzcGxheSwodiktPlxuICAgICAgdi5jYWxsc1t2LmNhbGxzLmxlbmd0aC0yXS12LmNhbGxzW3YuY2FsbHMubGVuZ3RoLTFdXG4gICAgXG4gICAgZGlzcGxheS51bnNoaWZ0IHRvdGFsX2NhbGxzXG4gICAgXG4gICAgbWVkaWFfbGkgPSBkMy5zZWxlY3QoJyNwcm9ncmFtcycpXG4gICAgICAuc2VsZWN0QWxsKCdsaScpXG4gICAgICAuZGF0YShkaXNwbGF5KVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoXCJsaVwiKVxuICAgICAgICAuY2xhc3NlZChcImxpc3QtZ3JvdXAtaXRlbVwiLHRydWUpXG4gICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5jbGFzc2VkKFwibWVkaWFcIix0cnVlKVxuXG4gICAgbWVkaWFfbGkgXG4gICAgICAuZWFjaCAoZCxpKS0+XG5cbiAgICAgICAgbWVkaWEgPSBkMy5zZWxlY3QgQFxuXG4gICAgICAgIGcgPSBtZWRpYS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAuY2xhc3NlZChcInB1bGwtbGVmdFwiLHRydWUpXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgIC5jbGFzc2VkKFwibWVkaWEtb2JqZWN0XCIsdHJ1ZSlcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDk2KVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDY0KVxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsIDIpJyk7XG5cbiAgICAgICAgbmV3IFNwYXJrbGluZSBnLCBkICAgICAgICAgICAgICAgIFxuXG4gICAgICAgIGJvZHkgPSBtZWRpYSAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgIC5jbGFzc2VkKFwibWVkaWEtYm9keVwiLHRydWUpXG5cbiAgICAgICAgYm9keS5hcHBlbmQoJ2g0JylcbiAgICAgICAgICAuY2xhc3NlZChcIm1lZGlhLWhlYWRpbmdcIix0cnVlKVxuICAgICAgICAgIC50ZXh0IGQubmFtZVxuXG4gICAgICAgIGJvZHkuYXBwZW5kKCdwJylcbiAgICAgICAgICAudGV4dCAoZCxpKS0+IFxuICAgICAgICAgICAgc2VudGVuY2UgPSBbXCJUaGVyZSB3ZXJlXCIsXCJcIixcImJhbGFuY2UgY2hlY2tzIGJldHdlZW5cIixcIlwiLFwiYW5kXCIsXCJcIl1cbiAgICAgICAgICAgIHNlbnRlbmNlWzFdPWQuc3VtKClcbiAgICAgICAgICAgIHNlbnRlbmNlWzNdPURhdGVVdGlsKF8uZmlyc3QoZC5kYXRlcyksXCJNL0RcIilcbiAgICAgICAgICAgIHNlbnRlbmNlWzVdPURhdGVVdGlsKF8ubGFzdChkLmRhdGVzKSxcIk0vRFwiKStcIi5cIlxuICAgICAgICAgICAgc2VudGVuY2Uuam9pbiBcIiBcIlxuICAgICAgICAgICAgXG4gICAgICAgIGJvZHkuYXBwZW5kKCdwJylcbiAgICAgICAgICAudGV4dCAoZCxpKS0+XG4gICAgICAgICAgICB0ZW5kYXkgPSBkLmF2ZygxMClcbiAgICAgICAgICAgIGNoayA9IGlmIHRlbmRheSBpcyAxIHRoZW4gXCIgY2hlY2tcIiBlbHNlIFwiIGNoZWNrc1wiXG4gICAgICAgICAgICBcIlRoZXJlIHdhcyBhbiBhdmVyYWdlIG9mICBcIiArIHRlbmRheSArIGNoayArIFwiIHBlciBkYXkgb3ZlciB0aGUgcGFzdCAxMCBkYXlzLlwiXG5cbiAgICAgICAgYm9keS5hcHBlbmQoJ3AnKS50ZXh0IChkLGkpLT5cbiAgICAgICAgICAgIGxhc3RjYWxscyA9IF8ubGFzdChkLmNhbGxzLDIpXG4gICAgICAgICAgICBsYXN0ZGF0ZXMgPSBfLmxhc3QoZC5kYXRlcywyKVxuICAgICAgICAgICAgZGlmZj0gbGFzdGNhbGxzWzFdIC0gbGFzdGNhbGxzWzBdXG4gICAgICAgICAgICBzZW50ZW5jZSA9IFtcIlRoZXJlIC4uLlwiLFwibnVtXCIsXCJtb3JlXCIsXCJjaGVja3NcIixcIm9uXCIsXCJkYXRlXCIsXCJ0aGFuIG9uXCIsXCJkYXRlXCJdXG4gICAgICAgICAgICBzZW50ZW5jZVswXSA9IGlmIChNYXRoLmFicyBkaWZmKSBpcyAxIHRoZW4gXCJUaGVyZSB3YXNcIiBlbHNlIFwiVGhlcmUgd2VyZVwiXG4gICAgICAgICAgICBzZW50ZW5jZVsxXSA9IE1hdGguYWJzIGRpZmZcbiAgICAgICAgICAgIHNlbnRlbmNlWzJdID0gaWYgZGlmZiA+IDAgdGhlbiBcIm1vcmVcIiBlbHNlIFwiZmV3ZXJcIlxuICAgICAgICAgICAgc2VudGVuY2VbM10gPSBpZiAoTWF0aC5hYnMgZGlmZikgaXMgMSB0aGVuIFwiY2hlY2tcIiBlbHNlIFwiY2hlY2tzXCJcbiAgICAgICAgICAgIHNlbnRlbmNlWzVdID0gRGF0ZVV0aWwgbGFzdGRhdGVzWzFdLFwiTS9EXCJcbiAgICAgICAgICAgIHNlbnRlbmNlWzddID0gRGF0ZVV0aWwoIGxhc3RkYXRlc1swXSxcIk0vRFwiICkrIFwiLlwiXG4gICAgICAgICAgICBpZiBkaWZmIGlzIDBcbiAgICAgICAgICAgICAgc2VudGVuY2VbMV09XCJ0aGVcIlxuICAgICAgICAgICAgICBzZW50ZW5jZVsyXT1cInNhbWUgbnVtYmVyIG9mXCJcbiAgICAgICAgICAgICAgc2VudGVuY2VbNl09XCJhbmRcIlxuICAgICAgICAgICAgc2VudGVuY2Uuam9pbiBcIiBcIlxuICAgICAgICAgICAgXG4kKGRvY3VtZW50KS5yZWFkeSAtPiAgICAgIFxuICAgIGRhdGFfdXJsID0naHR0cHM6Ly9wbG90Lmx5L35saXBweXRhay8xODQvYmFsYW5jZS1tZXRyaWNzLWNoZWNrcy5qc29uJ1xuICAgIGVycl9tc2cgPSAtPlxuICAgICAgZDMuc2VsZWN0KCcjdGlja2VyX21zZycpLnRleHQoJ1NvcnJ5LCB0aGUgcmVxdWVzdCBmYWlsZWQuJylcblxuICAgIGQzLnNlbGVjdCgnI3RpY2tlcl9tc2cnKS50ZXh0KCdSZXRyaWV2aW5nIGRhdGEgLi4uICcpXG4gICAgXG4gICAgJC5hamF4IHtcbiAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgdXJsOiBkYXRhX3VybFxuICAgIH1cbiAgICAuZG9uZSAoZGF0YSktPlxuICAgICAgaWYgZGF0YS5kYXRhXG4gICAgICAgIGQzLnNlbGVjdCgnI3RpY2tlcl9tc2cnKS50ZXh0KCdTb3J0ZWQgYnkgbGFyZ2VzdCBkYWlseSBpbmNyZWFzZScpXG4gICAgICAgIGJ1aWxkIGRhdGEuZGF0YVxuICAgICAgZWxzZVxuICAgICAgICBlcnJfbXNnKClcbiAgICAuZmFpbCAoZXJyKSAtPlxuICAgICAgZXJyX21zZygpIl19